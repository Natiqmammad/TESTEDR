import forge.log as log;
import forge.flutter as flutter;

fun apex() {
    log.info("=== Flutter VM Test ===");
    flutter.run_app("NightScript Flutter Demo");

    // Root scaffold + app bar
    flutter.build_widget("scaffold", "root");
    flutter.build_widget("appbar", "app_bar", "NightScript Embedder");
    flutter.add_child("root", "app_bar");

    // Body column with text + button
    flutter.build_widget("column", "body");
    flutter.build_widget("text", "title", "Hello from NightScript VM");
    flutter.add_child("body", "title");
    flutter.build_widget("button", "cta", "Tap Me");
    flutter.add_child("body", "cta");
    flutter.add_child("root", "body");

    flutter.window_metrics(1280, 720, 1.0);
    flutter.render();

    flutter.pointer_event("down", 48.0, 120.0);
    flutter.pointer_event("up", 48.0, 120.0);
    flutter.render();

    log.info("=== Flutter VM test completed ===");
}
